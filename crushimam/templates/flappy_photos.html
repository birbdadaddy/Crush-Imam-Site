{% extends 'crushimam/base.html' %}

{% block title %}Captured Flappy Photos{% endblock %}

{% block content %}
<div class="container">
<div class="confessions-wrapper">
    <h3>Captured Flappy Photos (Admin)</h3>
    {% if photos %}
        <div class="photos-wrapper">
            <div class="photos-list">
                {% for p in photos %}
                    <div class="confession-item">
                        <div class="confession-header-row">
                            <div class="confession-meta">
                                <span class="confession-author">
                                    {% if p.user.username %}
                                            <a href="https://www.instagram.com/{{ p.user.username }}" target="_blank">{{ p.user.username }}</a>
                                    {% else %}
                                        Anonymous
                                    {% endif %}
                                </span>
                                <span class="confession-date">{{ p.created_at|date:"M d, Y H:i" }}</span>
                            </div>
                            <div class="confession-actions-header">
                                <a href="{{ p.image.url }}" target="_blank" class="btn btn-sm btn-primary">View</a>
                            </div>
                        </div>
                        
                        <div class="confession-content">
                            <img src="{{ p.image.url }}" alt="Photo" style="max-width: 100%; height: auto; border-radius: 8px;">
                        </div>
                        
                        <div class="confession-footer">
                            <span class="confession-anonymous">ID: #{{ p.pk }}</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- Pagination -->
        <div class="pagination-wrapper">
            <nav class="pagination">
                {% if photos.has_previous %}
                    <a href="?page=1" class="page-link first" title="First Page"></a>
                    <a href="?page={{ photos.previous_page_number }}" class="page-link">Previous</a>
                {% else %}
                    <span class="page-link disabled"></span>
                    <span class="page-link disabled">Previous</span>
                {% endif %}
                
                <span class="page-info">
                    Page {{ photos.number }} of {{ paginator.num_pages }}
                </span>
                
                {% if photos.has_next %}
                    <a href="?page={{ photos.next_page_number }}" class="page-link">Next</a>
                    <a href="?page={{ paginator.num_pages }}" class="page-link last" title="Last Page"></a>
                {% else %}
                    <span class="page-link disabled">Next</span>
                    <span class="page-link disabled"></span>
                {% endif %}
            </nav>
        </div>
    {% else %}
        <div class="empty-state">
            <p>No photos captured yet</p>
        </div>
    {% endif %}
</div>
</div>
{% endblock %}
